<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>내 정보</title>
    <link rel="stylesheet" th:href="@{/css/my-page.css}">
</head>
<body>

<div class="top-bar">
    <span th:text="'Player: ' + ${username}"></span>
    <span th:text="' | Nickname: ' + ${nickname}"></span>
    <span th:text="' | Role: ' + ${role}"></span>
    <span th:text="' | Raid: ' + ${scenario.name}"></span>
    <span th:if="${scenario.bossName != null}"
          th:text="' | Boss: ' + ${scenario.bossName}"></span>
</div>

<div class="mypage-container">

    <!-- LEFT: 내 정보 / 캐릭터 정보 -->
    <div class="mypage-left">
        <div class="card user-card">
            <div class="section-title">내 계정 정보</div>
            <div class="info-row"><span class="label">아이디</span>
                <span class="value" th:text="${username}">username</span></div>
            <div class="info-row"><span class="label">닉네임</span>
                <span class="value" th:text="${nickname}">nickname</span></div>
            <div class="info-row"><span class="label">권한</span>
                <span class="value" th:text="${role}">USER</span></div>
        </div>

        <div class="card character-card">
            <div class="section-title">캐릭터 정보</div>

            <!-- 나중에 진짜 캐릭터 엔티티 연결 시 th:text로 교체 -->
            <div class="info-row">
                <span class="label">캐릭터 이름</span>
                <span class="value"
                      th:text="${character != null ? character.name : '미등록'}">미등록</span>
            </div>

            <div class="info-row">
                <span class="label">공격력</span>
                <span class="value"
                      th:text="${character != null ? character.atk : '-'}">-</span>
            </div>

            <div class="info-row">
                <span class="label">지력</span>
                <span class="value"
                      th:text="${character != null ? character.intelligence : '-'}">-</span>
            </div>

            <div class="info-row">
                <span class="label">HP 스탯</span>
                <span class="value"
                      th:text="${character != null ? character.hp : '-'}">-</span>
            </div>

            <div class="info-row">
                <span class="label">의지</span>
                <span class="value"
                      th:text="${character != null ? character.det : '-'}">-</span>
            </div>

            <div class="info-row">
                <span class="label">현재 HP</span>
                <span class="value"
                      th:text="${character != null ? character.currentHp + ' / ' + character.maxHp : '-'}">
                    -
                </span>
            </div>
        </div>
    </div>

    <!-- RIGHT: 채팅 + 전투방 입장 -->
    <div class="mypage-right">
        <div class="chat-header">로비 채팅 (세트별)</div>
        <div id="chat-status" class="chat-status">연결 대기중...</div>

        <!-- username / roomId 전달 -->
        <div class="chat-window"
             id="chat-window"
             th:attr="data-username=${username}, data-room-id=${lobbyRoomId}">
        </div>

        <div class="chat-footer">
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="메시지를 입력하세요">
                <button id="chat-send-btn">보내기</button>
            </div>

            <!-- 전투방 입장 버튼 -->
            <div class="enter-raid-wrapper">
                <button id="enter-raid-btn"
                        class="enter-raid-btn"
                        th:attr="data-raid-url=@{|/raid-room/${scenario.id}|}">
                    ⚔ 전투방 입장
                </button>
            </div>
        </div>
    </div>
</div>

<script th:src="@{/js/my-page.js}"></script>
</body>
</html>
