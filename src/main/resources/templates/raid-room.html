<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Boss Raid</title>
    <link rel="stylesheet" th:href="@{/css/raid-room.css}">
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <script src="/js/global.js" defer></script>
</head>
<body>

<div class="top-bar">
    <span th:text="'Player: ' + ${username}"></span>
    <span th:if="${character != null}"
          th:text="' | Character: ' + ${character.name}"></span>
    <span th:text="' | Raid: ' + ${scenario.name}"></span>
    <span th:if="${scenario.bossName != null}"
          th:text="' | Boss: ' + ${scenario.bossName}"></span>

    <!-- üî• ADMIN Ï†ÑÏö© Ï†ÑÌà¨ ÏãúÏûë Î≤ÑÌäº -->
    <button id="admin-start-btn"
            th:if="${isAdmin}"
            class="admin-start-btn">
        Ï†ÑÌà¨ ÏãúÏûë
    </button>
</div>

<div class="raid-container">

    <!-- ===== LEFT: Î≥¥Ïä§ & ÌååÌã∞ ===== -->
    <div class="raid-left">
        <!-- Î≥¥Ïä§ ÏòÅÏó≠ -->
        <div class="boss-area">
            <div class="section-title">Boss</div>
            <div class="boss-name" id="boss-name"
                 th:text="${bossName}">Dark Dragon</div>
            <div class="hp-bar-wrapper">
                <div class="hp-bar-fill" id="boss-hp-bar"></div>
            </div>
            <div class="hp-text" id="boss-hp-text"
                 th:text="${'HP ' + bossCurrentHp + ' / ' + bossMaxHp}">
                HP 7000 / 10000 (70%)
            </div>
        </div>

        <!-- ÌååÌã∞ ÏòÅÏó≠ -->
        <div class="party-area">
            <div class="section-title">Party</div>

            <div th:each="member : ${partyMembers}" class="character-row">
                <div class="character-name" th:text="${member.name}">Player1</div>
                <div class="char-hp-wrapper">
                    <div class="char-hp-fill"
                         th:attr="style=|width: ${member.hpRatio}%|"></div>
                </div>
                <div class="char-hp-text"
                     th:text="${member.hp} + ' / ' + ${member.maxHp}">
                    100 / 100
                </div>
            </div>
        </div>
    </div>

    <!-- ===== RIGHT: Ï±ÑÌåÖ ===== -->
    <div class="raid-right">
        <div class="chat-header">Raid Chat</div>
        <div id="chat-status" class="chat-status">Ïó∞Í≤∞ ÎåÄÍ∏∞Ï§ë...</div>

        <div class="chat-window"
             id="chat-window"
             th:attr="data-username=${username}, data-room-id=${roomId}">
        </div>

        <div class="chat-input-area">
            <input id="chat-input"
                   type="text"
                   placeholder="Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
            <button id="chat-send-btn">Î≥¥ÎÇ¥Í∏∞</button>
        </div>

        <div class="action-row">
            <label>
                <input type="radio" name="action-mode" value="CHAT" checked>
                üí¨ Ï±ÑÌåÖ
            </label>
            <label>
                <input type="radio" name="action-mode" value="ATTACK">
                üó° Í≥µÍ≤©
            </label>
            <label>
                <input type="radio" name="action-mode" value="DEFEND">
                üõ° Î∞©Ïñ¥
            </label>

            <select id="defend-target-select" disabled>
                <option value="">Î∞©Ïñ¥ ÎåÄÏÉÅ ÏÑ†ÌÉù</option>
                <!-- PARTY_UPDATE Î∞õÏùÑ Îïå Ïó¨Í∏∞ ÏòµÏÖò Ï±ÑÏõÄ -->
            </select>
        </div>
    </div>

</div>

<script th:src="@{/js/raid-room.js}"></script>
</body>
</html>
